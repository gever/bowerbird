<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>bowerbird: device setup</title>
    <link rel="stylesheet" href="/bowerbird.css" type="text/css">
    <meta name="description" content="Bowerbird device setup for pilots">
    <style>
    body {
        /* let's let people pick their own sizing - so many devices to support these days! */
        /* max-width: 1000px; */
        /* font-size: medium; */
    }
    tr:nth-child(even) {
        background-color: #f2f2f2
    }
    td {
        padding: 10px;
    }
    table {
        border: 1px solid #f2f2f2;
    }
    ul.bare {
        list-style: none;
        padding: 0px 5px;
        margin: 0px 0px;
    }
    th {
        border-bottom: 1px solid #f2f2f2;
        background-color: #f2f2f2;
    }
    p {
        margin-left: 10px;
    }
    blockquote {
        background: #f9f9f9;
        border-left: 5px solid #ccc;
        margin: 1.5em 10px;
        padding: 0.5em 10px;
        quotes: "\201C""\201D""\2018""\2019";
    }
    th {
        padding: 5px;
    }
    .hidden { 
        display:none;
    }
    dl {
        margin-left: 10px;
    }
    dd {
        margin-top: 5px;
        margin-bottom: 10px;
    }
    h2 {
        margin-top: 50px;
    }
    iframe {
        width: 100%;
        height: 80px;
        margin-top: -20px;
    }
    </style>
</head>

<body onload="body_load()">
${nav}

<h1>Bowerbird: Satellite Tracker Setup</h1>
    ${PilotInfo}
<div class="chat">
<p>
    <b>Which Tracker Do You Use?</b>
    <br/>
    <input type="radio" id="inreach" name="tracker" value="inreach" onclick="showHide('inreach', 'spot')"/>
    <label for="inreach">InReach</label>
    <br/>
    <input type="radio" id="spot" name="tracker" value="spot" onclick="showHide('spot', 'inreach')"/>
    <label for="spot">SPOT</label>
</p>


<div class="inreach hidden">
    <h2>Step 1 - Setting your device configuration</h2>
    <p>Log in to your <a href="https://inreach.garmin.com" target="_blank" class="chat">https://inreach.garmin.com</a> configuration page
         and set up the following messages. Please format the messages <b>exactly</b>
        as shown below. Be sure that each word is separated by a <u>space</u>.</p>
    <h3>Under Messages tab</h3> 
    <p>Set your three Preset messages by cutting and pasting the Message and Recipients shown below into each Preset message. 
        Feel free to include additional recipients for any message (such as people you are travelling with or relatives back home).</p>
    ${InreachTable}
    <p>Don't forget that Preset 2 (AID) is used for non-life threatening emergencies. If you require emergency services, press the "SOS" button on 
        your device!</p>

    <h3>Under the Social tab</h3>
    <p>Confirm that your MapShare is on (green button) and Visibility is "Public".
    Find your share URL, which looks like: <b>https://share.delorme.com/MyTrackingPage</b>. This should have been provided in your Registration form. You can confirm the correct one is in the system by going to <a href="/pilot/${LABEL_URL}" target="_blank" class="chat">http://bbtrack.me/pilot/${LABEL_PID}</a> to see your pilot details. Then click on the "Tracking Page" link to make sure it’s yours (with at least one message/tracking point shown). If it is incorrect, be sure to provide the correct information via this form: <a href="http://bit.ly/bb-tracking-form" target="_new" class="chat">http://bit.ly/bb-tracking-form</a>. 
    </p>
    <p>Note that for your InReach this is NOT the URL in one of your messages OR your InReach email address. <b>We need your MapShare page</b>.</p>

    <h3>Under the Account tab</h3>
    <p>Under the Account tab in the SMS Message Configuration area, be sure to check the box
        "Include my latitude and longitude as text in the message". While under the Account tab you should also complete the following SOS customization:
    </p>
</div>

<div class="spot hidden">
    <h2>Step 1 - Setting your device configuration</h2>
    <h3>Create a profile</h3>
    <p>Log in to your <a href="https://login.findmespot.com" target="_blank" class="chat">https://login.findmespot.com</a> account, select your device and go to your Profiles by clicking "view/edit". The easiest thing is to create a new Profile for this competition - be sure to set it as the "active" profile!
    Please format the messages <b>exactly</b>
    as shown below, making sure that each word is separated by a <u>space</u>. The one exception is the phone numbers in the Recipient list. If you have a US number be sure to select your mobile provider from the list. If you have a non-US number or SPOT account you may need to configure your device using only email recipients. Please refer to the "Special instructions" below the chart.</p>
    <p>Set up the following messages for your competition profile. Set your three messages by cutting and pasting the Message and Recipients shown below into each message profile. Feel free to include additional recipients for any message (such as people you are travelling with or relatives back home).
    </p>
    ${SpotTable}
<p>
If your device does not support a custom (3rd) message then you will have to send your PUP message via your cell phone or with the help of another pilot.</p>
    <p>Don't forget that the Help button (AID) is used for non-life threatening emergencies. If you require emergency services, press the "SOS" button on your device!</p>
    <p><b>Special instructions for non-US SPOT accounts</b>: you must use only email addresses to configure the message Recipients. However, Bowerbird can not interpret these messages automatically. In order to ensure the messages are not completely overlooked by the Retrieve/Check-in team, please insert your pilot number ("${LABEL_PID}") into your <b>username</b> (as the very first word).
    <h3>Under the Share tab</h3>
    <p>If you do not already have a Shared page, click "Create Shared Page", otherwise click "Manage Shared Pages".
Make sure your page includes your messages, track, and coordinates for at least the past 7 days. After saving, you will see your
share URL, which looks like: <b>http://share.findmespot.com/shared/faces/viewspots.jsp?glId=0JTj1ylmiNo9ZcnZUNkNOFgn0UBSNe753</b></p>
    <p>This should have been included on your Registration form. You can confirm the correct one is in the system by going to <a href="/pilot/${LABEL_PID}" target="_blank" class="chat">http://bbtrack.me/pilot/${LABEL_PID}</a> to see your pilot details. Then click on the "Tracking Page" link to make sure it’s yours (with at least one message/tracking point shown). If it is incorrect, be sure to provide the correct information via this form: <a href="http://bit.ly/bb-tracking-form" target="_new" class="chat">http://bit.ly/bb-tracking-form</a>. 
</div>

<div id="otherSteps" class="hidden">
    <div>
        ${SosSection}
    </div>
    
    <div>
        <h2>Step 2 - Testing your messages</h2>
        <h3>SYNC & SEND A TEST OF ALL THREE MESSAGES</h3>
        <p>
            Once you’ve completed the updates described above, sync your device and send ALL your preset messages so the organizers can see that they are working correctly.
        </p>
        <ol>
            <li>Send your LOK message (Check-in/OK) and check <a href="/" class="chat">http://bbtrack.me</a> 
                to see your pilot tile (#${LABEL_PID}) is yellow with LOK status. Click on your <a href="/pilot/${LABEL_PID}" class="chat">pilot tile</a> and confirm your GPS coordinates are shown on the map.
            </li>
            <li>Send your AID message (HELP) and check <a href="/" class="chat">http://bbtrack.me</a> 
                to see your pilot tile (#${LABEL_PID}) is pink with AID status. Click on your <a href="/pilot/${LABEL_PID}" class="chat">pilot tile</a> and confirm your GPS coordinates are shown on the map.
            </li>
            <li>Send your PUP message (CUSTOM) and check <a href="/" class="chat">http://bbtrack.me</a> 
                to see your pilot tile (#${LABEL_PID}) is green with PUP status. Click on your <a href="/pilot/${LABEL_PID}" class="chat">pilot tile</a> and then click your Tracking URL to make sure it takes you to your personal tracking page and all your messages are shown there.
            </li>
        </ol>
        <p>The organizers will review your messages and tracking URL. Once confirmed
            that everything is correct and working (including GPS coordinates in your messages)
            your status will be changed to "FIN" - that means you're FINished and good to go!
        </p>
        <p><b>NOTE:</b> If you ever see the bright yellow “ASK” status for your number, please contact HQ. 
            There is an issue with either your configuration or some message that was sent.
        </p>
        
        <h4>Messages Received:</h4>
        <iframe id="statuses" src="/pilotstatus/${LABEL_PID}"></iframe>

        <h2>Tips and Common Problems with Solutions</h2>
        <dl>
            <dt>Your tile is blue...</dt>
            <dd>
                That means your message was not recognized. Check the format of your messages in your <span class="spot">SPOT</span><span class="inreach">inReach</span> account.
            </dd>
            <dt>Your tile does not change...</dt>
            <dd>
                That might mean the message did not actually go through to Bowerbird. You should have also received a copy of the message on your 
                cell phone (if you configured your device correctly). Did you get it? <span class="spot">If not it can take 30 minutes for the 
                message to be transmitted - and it must be in full view of the southern sky for all that time.</span><span class="inreach">If not 
                you should be able to check your Messages log to confirm it was sent (wait for the ringing sound and confirmation before turning 
                off your device).</span>
            </dd>
            <dt>If your tile does not change...</dt>
            <dd>
                That might mean you didn't include the current competition telephone number. Check to see that the telephone numbers in your 
                    <span class="spot">SPOT</span><span class="inreach">inReach</span> messages match the instructions above.
            </dd>
            <dt>If your tile does not change...</dt>
            <dd>
                That might mean your pilot ("Participant") number was not recognized. Check to see that the pilot number in your 
                <span class="spot">SPOT</span><span class="inreach">inReach</span> message matches your "Participant" number in the pilot list 
                and isn't the number from a previous competition :-) 
            </dd>
        </dl>
        <p><em>Device setup should be done and tested BEFORE you arrive at the event.</em></p>
    </div>
    <div>
        <!-- <a href="/pilot-bowerbird-usage.html">How to Use Bowerbird</a> -->
        <!-- trying linking directly to the google doc (one less thing to maintain here?) -->
        <a href="https://docs.google.com/document/d/e/2PACX-1vQpagRCs_KtKXyHx1dHDMppSmuE9wm1Z608aqcceVBE9seBAjpUdDkRdPNYeLiiG8_RsO1fLgs4jDp2/pub">How to Use Bowerbird</a>
        <br/>
        <br/>
    </div>
</div>


<script type="text/javascript">
    function hasClass(el, cls) {
        return !!el.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
    }

    function addClass(el, cls) {
        if (!hasClass(el, cls)) el.className += " " + cls;
    }

    function removeClass(el, cls) {
        if (hasClass(el, cls)) {
            var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
            el.className = el.className.replace(reg,' ');
        }
    }

    function showHide(showClass, hideClass) {
        var showEls = document.getElementsByClassName(showClass);
        var hideEls = document.getElementsByClassName(hideClass);

        for (var i = 0; i < showEls.length; i++)
            removeClass(showEls[i], "hidden");

        for (var i = 0; i < hideEls.length; i++)
            addClass(hideEls[i], "hidden");

        // Hide the other steps until the first Step is shown
        var otherEl = document.getElementById('otherSteps');
        removeClass(otherEl, "hidden");
    }

    function load_status() {
        var iframe = document.getElementById('statuses');
        iframe.src = iframe.src;
    }

    function body_load() {
        if (document.getElementById('inreach').checked)
            showHide('inreach', 'spot');

        if (document.getElementById('spot').checked)
            showHide('spot', 'inreach');

        setInterval(function () { load_status(); }, 30000);
    }
</script>
</body>
</html>

